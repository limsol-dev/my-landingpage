---
description: 
globs: 
alwaysApply: false
---
# ğŸ—ï¸ Architecture & Project Structure Rules

## ğŸ“‹ CONTEXT & SCOPE
This is a Next.js 15 + TypeScript + Tailwind CSS + shadcn/ui Korean pension booking system. 
**CRITICAL**: Follow these patterns to maintain architectural consistency and Korean localization.

## âœ… MUST DO - Architecture Imperatives

### 1. File Organization Hierarchy (NON-NEGOTIABLE)
```
âœ… CORRECT Structure:
app/
â”œâ”€â”€ (routes)/page.tsx           # Landing page: [app/page.tsx](mdc:app/page.tsx)
â”œâ”€â”€ admin/                      # Admin dashboard: [app/admin/layout.tsx](mdc:app/admin/layout.tsx)
â”œâ”€â”€ api/                        # API routes: [app/api/reservations/route.ts](mdc:app/api/reservations/route.ts)
â”œâ”€â”€ booking/                    # Booking flow
â”œâ”€â”€ components/                 # Page-specific components
â”œâ”€â”€ lib/                        # Utilities: [app/lib/utils.ts](mdc:app/lib/utils.ts)
â””â”€â”€ types/                      # Type definitions: [app/types/reservation.ts](mdc:app/types/reservation.ts)

components/
â”œâ”€â”€ ui/                         # shadcn/ui components: [components/ui/table.tsx](mdc:components/ui/table.tsx)
â”œâ”€â”€ sections/                   # Landing page sections: [components/sections/Hero.tsx](mdc:components/sections/Hero.tsx)
â”œâ”€â”€ admin/                      # Admin-specific components
â”œâ”€â”€ auth/                       # Authentication components
â””â”€â”€ reservation/                # Booking-specific components
```

### 2. Import Order Protocol (STRICT ENFORCEMENT)
```typescript
// âœ… MANDATORY Import Sequence:

// 1. React & Next.js Core (FIRST)
"use client"
import * as React from "react"
import { useState, useEffect } from "react"
import Image from "next/image"

// 2. External Libraries (Alphabetical)
import { clsx } from "clsx"
import { format } from "date-fns"
import { Slot } from "@radix-ui/react-slot"

// 3. Internal Imports with @ Alias (Alphabetical)
import { Button } from "@/components/ui/button"
import { cn } from "@/lib/utils"
import { useBookingStore } from "@/store/useBookingStore"

// 4. Relative Imports (Last Resort Only)
import "./component.css"
```

### 3. TypeScript Path Configuration (ABSOLUTE REQUIREMENT)
```typescript
// âœ… ALWAYS Use @ Alias from [tsconfig.json](mdc:tsconfig.json):
import { Component } from "@/components/ui/component"
import { utils } from "@/lib/utils"
import { ReservationInfo } from "@/types/reservation"

// âœ… Alias Mapping:
"@/*" â†’ "./*"                   # Root workspace
"@/components" â†’ "./components"  # UI components
"@/app" â†’ "./app"               # App router
"@/lib" â†’ "./lib"               # Utilities
"@/types" â†’ "./types"           # Type definitions
"@/store" â†’ "./store"           # State management
```

## âŒ NEVER DO - Architecture Violations

### ğŸš« FORBIDDEN Import Patterns
```typescript
// âŒ NEVER: Relative imports beyond one level
import { Component } from "../../../components/ui/component"

// âŒ NEVER: Mix Pages Router with App Router
import { GetServerSideProps } from "next" // Pages Router pattern

// âŒ NEVER: Direct node_modules imports
import Button from "node_modules/@radix-ui/react-button"

// âŒ NEVER: Circular dependencies
// file-a.ts imports file-b.ts AND file-b.ts imports file-a.ts
```

### ğŸš« FORBIDDEN File Organization
```typescript
// âŒ NEVER: Mix component types in same directory
components/
â”œâ”€â”€ Button.tsx          # UI component
â”œâ”€â”€ LoginPage.tsx       # Page component (WRONG LOCATION)
â”œâ”€â”€ api-utils.ts        # API utility (WRONG LOCATION)

// âŒ NEVER: Nested page components outside app/ directory
src/pages/              # Pages Router pattern (FORBIDDEN)
```

---

## ğŸ¯ DECISION FRAMEWORK
**Before creating any file, ask:**
1. "Is this a UI component, page component, or utility?"
2. "Does this belong in app/ (App Router) or components/ (reusable)?"
3. "Am I using the correct @ alias import path?"
4. "Does this follow the Korean pension domain logic?"

**If unsure, reference:** [app/page.tsx](mdc:app/page.tsx) for page structure, [components/ui/button.tsx](mdc:components/ui/button.tsx) for component patterns.

